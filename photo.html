<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sua Foto</title>
<style>
  body { font-family: sans-serif; text-align: center; padding: 50px; }
  img { max-width: 90%; height: auto; border: 2px solid #333; margin-bottom: 20px; }
  button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin-top: 20px; }
</style>
</head>
<body>
<h1>Sua Foto</h1>
<button id="downloadBtn">Baixar Foto</button>

<script>
  const params = new URLSearchParams(window.location.search);
  const img = params.get('img');
  const name = params.get('name') || 'foto';

  if(img){
    // Exibe a foto
    const foto = document.createElement('img');
    foto.src = img;
    document.body.insertBefore(foto, document.getElementById('downloadBtn'));

    // Baixar direto no celular
    const downloadBtn = document.getElementById('downloadBtn');
    downloadBtn.addEventListener('click', async () => {
      try {
        const res = await fetch(img);
        const blob = await res.blob();
        const url = window.URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = name + '.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);
      } catch(err){
        alert("Erro ao baixar a foto!");
        console.error(err);
      }
    });

  } else {
    document.body.innerHTML = '<h2>Foto n√£o encontrada!</h2>';
  }
</script>
</body>
</html>
